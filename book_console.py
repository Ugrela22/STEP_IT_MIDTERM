# book.py - рЃгрЃўрЃњрЃюрЃўрЃА рЃЎрЃџрЃљрЃАрЃў

class Book:
    """
    Book рЃЎрЃџрЃљрЃАрЃў рЃгрЃљрЃарЃЏрЃЮрЃљрЃЊрЃњрЃћрЃюрЃА рЃфрЃљрЃџрЃЎрЃћрЃБрЃџ рЃгрЃўрЃњрЃюрЃА рЃЉрЃўрЃЉрЃџрЃўрЃЮрЃЌрЃћрЃЎрЃљрЃерЃў.
    рЃерЃћрЃўрЃфрЃљрЃЋрЃА рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљрЃА рЃАрЃљрЃЌрЃљрЃБрЃарЃўрЃА, рЃљрЃЋрЃбрЃЮрЃарЃўрЃАрЃљ рЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃџрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ.
    """
    
    def __init__(self, title, author, publication_year):
        """
        рЃЎрЃЮрЃюрЃАрЃбрЃарЃБрЃЦрЃбрЃЮрЃарЃў - рЃљрЃ«рЃљрЃџрЃў рЃгрЃўрЃњрЃюрЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ
        
        рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
        - title (str): рЃгрЃўрЃњрЃюрЃўрЃА рЃАрЃљрЃЌрЃљрЃБрЃарЃў
        - author (str): рЃљрЃЋрЃбрЃЮрЃарЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў
        - publication_year (int): рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃћрЃџрЃў
        """
        self.title = title
        self.author = author
        self.publication_year = publication_year
    
    def to_dict(self):
        """
        рЃгрЃўрЃњрЃюрЃўрЃА рЃњрЃљрЃарЃЊрЃљрЃЦрЃЏрЃюрЃљ dictionary-рЃљрЃЊ (JSON-рЃўрЃАрЃЌрЃЋрЃўрЃА)
        
        Returns:
        - dict: рЃгрЃўрЃњрЃюрЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў dictionary рЃцрЃЮрЃарЃЏрЃљрЃбрЃерЃў
        """
        return {
            'title': self.title,
            'author': self.author,
            'publication_year': self.publication_year
        }
    
    @staticmethod
    def from_dict(data):
        """
        Dictionary-рЃЊрЃљрЃю рЃгрЃўрЃњрЃюрЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ (JSON-рЃЊрЃљрЃю рЃгрЃљрЃЎрЃўрЃЌрЃ«рЃЋрЃўрЃАрЃљрЃА)
        
        рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
        - data (dict): рЃгрЃўрЃњрЃюрЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў dictionary рЃцрЃЮрЃарЃЏрЃљрЃбрЃерЃў
        
        Returns:
        - Book: Book рЃЎрЃџрЃљрЃАрЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў
        """
        return Book(
            title=data['title'],
            author=data['author'],
            publication_year=data['publication_year']
        )
    
    def __str__(self):
        """
        рЃгрЃўрЃњрЃюрЃўрЃА рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃАрЃЌрЃЋрЃўрЃА рЃњрЃљрЃАрЃљрЃњрЃћрЃЉрЃў рЃАрЃбрЃарЃўрЃюрЃњрЃўрЃА рЃцрЃЮрЃарЃЏрЃљрЃбрЃў
        рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ рЃарЃЮрЃфрЃљ print(book) рЃЋрЃўрЃФрЃљрЃ«рЃћрЃЉрЃЌ
        """
        return f"рЃАрЃљрЃЌрЃљрЃБрЃарЃў: {self.title}, рЃљрЃЋрЃбрЃЮрЃарЃў: {self.author}, рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃћрЃџрЃў: {self.publication_year}"
    
    def __repr__(self):
        """
        рЃгрЃўрЃњрЃюрЃўрЃА рЃбрЃћрЃЦрЃюрЃўрЃЎрЃБрЃарЃў рЃгрЃљрЃарЃЏрЃЮрЃЊрЃњрЃћрЃюрЃљ - рЃЊрЃћрЃЋрЃћрЃџрЃЮрЃърЃћрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА
        """
        return f"Book('{self.title}', '{self.author}', {self.publication_year})"


# book_manager.py - рЃгрЃўрЃњрЃюрЃћрЃЉрЃўрЃА рЃЏрЃћрЃюрЃћрЃ»рЃћрЃарЃўрЃА рЃЎрЃџрЃљрЃАрЃў

import json
import os

class BookManager:
    """
    BookManager рЃЎрЃџрЃљрЃАрЃў рЃЏрЃљрЃарЃЌрЃљрЃЋрЃА рЃгрЃўрЃњрЃюрЃћрЃЉрЃўрЃА рЃЎрЃЮрЃџрЃћрЃЦрЃфрЃўрЃљрЃА.
    рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃцрЃА рЃгрЃўрЃњрЃюрЃћрЃЉрЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљрЃА, рЃгрЃљрЃерЃџрЃљрЃА, рЃФрЃўрЃћрЃЉрЃљрЃА рЃЊрЃљ JSON рЃцрЃљрЃўрЃџрЃерЃў рЃерЃћрЃюрЃљрЃ«рЃЋрЃљрЃА.
    """
    
    def __init__(self, filename='books_data.json'):
        """
        рЃЎрЃЮрЃюрЃАрЃбрЃарЃБрЃЦрЃбрЃЮрЃарЃў - рЃЦрЃЏрЃюрЃўрЃА рЃфрЃљрЃарЃўрЃћрЃџ рЃгрЃўрЃњрЃюрЃћрЃЉрЃўрЃА рЃАрЃўрЃљрЃА рЃЊрЃљ рЃўрЃбрЃЋрЃўрЃарЃЌрЃљрЃЋрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃА рЃцрЃљрЃўрЃџрЃўрЃЊрЃљрЃю
        
        рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
        - filename (str): JSON рЃцрЃљрЃўрЃџрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў рЃАрЃљрЃЊрЃљрЃф рЃўрЃюрЃљрЃ«рЃћрЃЉрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў
        """
        self.books = []  # рЃДрЃЋрЃћрЃџрЃљ рЃгрЃўрЃњрЃюрЃў рЃерЃћрЃўрЃюрЃљрЃ«рЃћрЃЉрЃљ рЃљрЃЏ рЃАрЃўрЃљрЃерЃў
        self.filename = filename  # JSON рЃцрЃљрЃўрЃџрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў
        self.load_from_file()  # рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃўрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃўрЃАрЃљрЃА рЃўрЃбрЃЋрЃўрЃарЃЌрЃћрЃЉрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў
    
    def save_to_file(self):
        """
        рЃДрЃЋрЃћрЃџрЃљ рЃгрЃўрЃњрЃюрЃўрЃА рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ JSON рЃцрЃљрЃўрЃџрЃерЃў
        
        рЃћрЃА рЃЏрЃћрЃЌрЃЮрЃЊрЃў:
        1. рЃњрЃљрЃарЃЊрЃљрЃЦрЃЏрЃюрЃўрЃА рЃДрЃЋрЃћрЃџрЃљ Book рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃА dictionary-рЃљрЃЊ
        2. рЃгрЃћрЃарЃА рЃЏрЃљрЃЌ JSON рЃцрЃљрЃўрЃџрЃерЃў
        3. рЃљрЃЏрЃљрЃбрЃћрЃЉрЃА indent-рЃА (рЃЊрЃљрЃгрЃБрЃарЃБрЃџрЃЮрЃЉрЃљрЃА) рЃЎрЃљрЃарЃњрЃў рЃгрЃљрЃАрЃљрЃЎрЃўрЃЌрЃ«рЃЮрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА
        """
        try:
            # рЃњрЃљрЃарЃЊрЃљрЃЦрЃЏрЃюрЃўрЃА рЃДрЃЋрЃћрЃџрЃљ рЃгрЃўрЃњрЃюрЃА dictionary-рЃљрЃЊ
            books_data = [book.to_dict() for book in self.books]
            
            # рЃгрЃћрЃарЃА JSON рЃцрЃљрЃўрЃџрЃерЃў
            with open(self.filename, 'w', encoding='utf-8') as file:
                json.dump(books_data, file, ensure_ascii=False, indent=4)
            
            print(f"­ЪњЙ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў рЃерЃћрЃюрЃљрЃ«рЃБрЃџрЃўрЃљ рЃцрЃљрЃўрЃџрЃерЃў: {self.filename}")
            
        except Exception as e:
            print(f"РЮї рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ рЃцрЃљрЃўрЃџрЃерЃў рЃЕрЃљрЃгрЃћрЃарЃўрЃАрЃљрЃА: {e}")
    
    def load_from_file(self):
        """
        рЃгрЃўрЃњрЃюрЃћрЃЉрЃўрЃА рЃЕрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ JSON рЃцрЃљрЃўрЃџрЃўрЃЊрЃљрЃю
        
        рЃћрЃА рЃЏрЃћрЃЌрЃЮрЃЊрЃў:
        1. рЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃА рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА рЃЌрЃБ рЃљрЃарЃљ рЃцрЃљрЃўрЃџрЃў
        2. рЃЌрЃБ рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА - рЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃА
        3. рЃњрЃљрЃарЃЊрЃљрЃЦрЃЏрЃюрЃўрЃА dictionary-рЃћрЃЉрЃА Book рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃљрЃЊ
        4. рЃЌрЃБ рЃцрЃљрЃўрЃџрЃў рЃљрЃа рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА - рЃЦрЃЏрЃюрЃўрЃА рЃАрЃљрЃгрЃДрЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃА
        """
        # рЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃА рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА рЃЌрЃБ рЃљрЃарЃљ рЃцрЃљрЃўрЃџрЃў
        if not os.path.exists(self.filename):
            print(f"­ЪЊѓ рЃцрЃљрЃўрЃџрЃў {self.filename} рЃљрЃа рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА. рЃўрЃЦрЃЏрЃюрЃћрЃЉрЃљ рЃљрЃ«рЃљрЃџрЃў рЃЉрЃљрЃќрЃљ...")
            self.create_initial_data()
            return
        
        try:
            # рЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃА JSON рЃцрЃљрЃўрЃџрЃА
            with open(self.filename, 'r', encoding='utf-8') as file:
                books_data = json.load(file)
            
            # рЃњрЃљрЃарЃЊрЃљрЃЦрЃЏрЃюрЃўрЃА dictionary-рЃћрЃЉрЃА Book рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃљрЃЊ
            self.books = [Book.from_dict(data) for data in books_data]
            
            print(f"РюЊ рЃЕрЃљрЃўрЃбрЃЋрЃўрЃарЃЌрЃљ {len(self.books)} рЃгрЃўрЃњрЃюрЃў рЃцрЃљрЃўрЃџрЃўрЃЊрЃљрЃю {self.filename}")
            
        except json.JSONDecodeError:
            print(f"РЮї рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: {self.filename} рЃцрЃљрЃўрЃџрЃў рЃЊрЃљрЃќрЃўрЃљрЃюрЃћрЃЉрЃБрЃџрЃўрЃљ!")
            print("­ЪЊѓ рЃўрЃЦрЃЏрЃюрЃћрЃЉрЃљ рЃљрЃ«рЃљрЃџрЃў рЃЉрЃљрЃќрЃљ...")
            self.books = []
            self.create_initial_data()
            
        except Exception as e:
            print(f"РЮї рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ рЃцрЃљрЃўрЃџрЃўрЃА рЃгрЃљрЃЎрЃўрЃЌрЃ«рЃЋрЃўрЃАрЃљрЃА: {e}")
            self.books = []
    
    def create_initial_data(self):
        """
        рЃАрЃљрЃгрЃДрЃўрЃАрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ (рЃърЃўрЃарЃЋрЃћрЃџрЃў рЃњрЃљрЃерЃЋрЃћрЃЉрЃўрЃАрЃљрЃА)
        рЃЊрЃћрЃЏрЃЮрЃюрЃАрЃбрЃарЃљрЃфрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА рЃљрЃЏрЃљрЃбрЃћрЃЉрЃА рЃарЃљрЃЏрЃЊрЃћрЃюрЃўрЃЏрЃћ рЃЦрЃљрЃарЃЌрЃБрЃџ рЃгрЃўрЃњрЃюрЃА
        """
        initial_books = [
            Book("рЃЋрЃћрЃцрЃ«рЃўрЃАрЃбрЃДрЃљрЃЮрЃАрЃљрЃюрЃў", "рЃерЃЮрЃЌрЃљ рЃарЃБрЃАрЃЌрЃљрЃЋрЃћрЃџрЃў", 1200),
            Book("рЃљрЃџрЃБрЃЊрЃљ рЃЦрЃћрЃЌрЃћрЃџрЃљрЃБрЃарЃў", "рЃЋрЃљрЃЪрЃљ-рЃцрЃерЃљрЃЋрЃћрЃџрЃљ", 1888),
            Book("рЃЏрЃЌрЃЋрЃљрЃарЃўрЃА рЃЏрЃЮрЃбрЃљрЃфрЃћрЃЉрЃљ", "рЃЎрЃЮрЃюрЃАрЃбрЃљрЃюрЃбрЃўрЃюрЃћ рЃњрЃљрЃЏрЃАрЃљрЃ«рЃБрЃарЃЊрЃўрЃљ", 1934)
        ]
        
        for book in initial_books:
            self.books.append(book)
        
        self.save_to_file()
        print(f"РюЊ рЃерЃћрЃўрЃЦрЃЏрЃюрЃљ рЃАрЃљрЃгрЃДрЃўрЃАрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў: {len(initial_books)} рЃгрЃўрЃњрЃюрЃў")
    
    def add_book(self, book):
        """
        рЃљрЃ«рЃљрЃџрЃў рЃгрЃўрЃњрЃюрЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ рЃЎрЃЮрЃџрЃћрЃЦрЃфрЃўрЃљрЃерЃў рЃЊрЃљ рЃцрЃљрЃўрЃџрЃерЃў рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ
        
        рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
        - book (Book): Book рЃЎрЃџрЃљрЃАрЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў
        """
        self.books.append(book)
        self.save_to_file()  # рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃўрЃюрЃљрЃ«рЃћрЃЉрЃљ рЃцрЃљрЃўрЃџрЃерЃў
        print(f"РюЊ рЃгрЃўрЃњрЃюрЃў '{book.title}' рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃўрЃЌ рЃЊрЃљрЃћрЃЏрЃљрЃбрЃљ!")
    
    def remove_book(self, title):
        """
        рЃгрЃўрЃњрЃюрЃўрЃА рЃгрЃљрЃерЃџрЃљ рЃАрЃљрЃЌрЃљрЃБрЃарЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ рЃЊрЃљ рЃцрЃљрЃўрЃџрЃерЃў рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ
        
        рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
        - title (str): рЃгрЃўрЃњрЃюрЃўрЃА рЃАрЃљрЃЌрЃљрЃБрЃарЃў рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃБрЃюрЃЊрЃљ рЃгрЃљрЃўрЃерЃљрЃџрЃЮрЃА
        
        Returns:
        - bool: True рЃЌрЃБ рЃгрЃљрЃерЃџрЃљ рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃБрЃџрЃў рЃўрЃДрЃЮ, False рЃгрЃўрЃюрЃљрЃљрЃдрЃЏрЃЊрЃћрЃњ рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў
        """
        for book in self.books:
            if book.title.lower() == title.lower():  # рЃљрЃа рЃљрЃарЃўрЃА рЃЏрЃњрЃарЃФрЃюрЃЮрЃЉрЃўрЃљрЃарЃћ рЃарЃћрЃњрЃўрЃАрЃбрЃарЃќрЃћ
                self.books.remove(book)
                self.save_to_file()  # рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃўрЃюрЃљрЃ«рЃћрЃЉрЃљ рЃцрЃљрЃўрЃџрЃерЃў
                print(f"РюЊ рЃгрЃўрЃњрЃюрЃў '{title}' рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃўрЃЌ рЃгрЃљрЃўрЃерЃљрЃџрЃљ!")
                return True
        
        print(f"РюЌ рЃгрЃўрЃњрЃюрЃў рЃАрЃљрЃЌрЃљрЃБрЃарЃўрЃЌ '{title}' рЃЋрЃћрЃа рЃЏрЃЮрЃўрЃФрЃћрЃЉрЃюрЃљ!")
        return False
    
    def search_by_title(self, title):
        """
        рЃгрЃўрЃњрЃюрЃўрЃА рЃФрЃўрЃћрЃЉрЃљ рЃАрЃљрЃЌрЃљрЃБрЃарЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ
        
        рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
        - title (str): рЃАрЃљрЃЌрЃљрЃБрЃарЃў (рЃљрЃю рЃЏрЃўрЃАрЃў рЃюрЃљрЃгрЃўрЃџрЃў) рЃарЃЮрЃЏрЃћрЃџрЃАрЃљрЃф рЃЋрЃћрЃФрЃћрЃЉрЃЌ
        
        Returns:
        - list: рЃюрЃљрЃърЃЮрЃЋрЃюрЃў рЃгрЃўрЃњрЃюрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ
        """
        results = []
        for book in self.books:
            if title.lower() in book.title.lower():
                results.append(book)
        return results
    
    def search_by_author(self, author):
        """
        рЃгрЃўрЃњрЃюрЃўрЃА рЃФрЃўрЃћрЃЉрЃљ рЃљрЃЋрЃбрЃЮрЃарЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ
        
        рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
        - author (str): рЃљрЃЋрЃбрЃЮрЃарЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў (рЃљрЃю рЃЏрЃўрЃАрЃў рЃюрЃљрЃгрЃўрЃџрЃў)
        
        Returns:
        - list: рЃюрЃљрЃърЃЮрЃЋрЃюрЃў рЃгрЃўрЃњрЃюрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ
        """
        results = []
        for book in self.books:
            if author.lower() in book.author.lower():
                results.append(book)
        return results
    
    def search_by_year(self, year):
        """
        рЃгрЃўрЃњрЃюрЃўрЃА рЃФрЃўрЃћрЃЉрЃљ рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃџрЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ
        
        рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
        - year (int): рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃћрЃџрЃў
        
        Returns:
        - list: рЃюрЃљрЃърЃЮрЃЋрЃюрЃў рЃгрЃўрЃњрЃюрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ
        """
        results = []
        for book in self.books:
            if book.publication_year == year:
                results.append(book)
        return results
    
    def display_all_books(self):
        """
        рЃДрЃЋрЃћрЃџрЃљ рЃгрЃўрЃњрЃюрЃўрЃА рЃЕрЃЋрЃћрЃюрЃћрЃЉрЃљ рЃћрЃЎрЃарЃљрЃюрЃќрЃћ
        """
        if not self.books:
            print("\n­ЪЊџ рЃЉрЃўрЃЉрЃџрЃўрЃЮрЃЌрЃћрЃЎрЃљ рЃфрЃљрЃарЃўрЃћрЃџрЃўрЃљ!")
            return
        
        print(f"\n­ЪЊџ рЃЉрЃўрЃЉрЃџрЃўрЃЮрЃЌрЃћрЃЎрЃљрЃерЃў рЃљрЃарЃўрЃА {len(self.books)} рЃгрЃўрЃњрЃюрЃў:")
        print("-" * 80)
        for i, book in enumerate(self.books, 1):
            print(f"{i}. {book}")
        print("-" * 80)


# validation.py - рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃўрЃА рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў

def validate_title(title):
    """
    рЃАрЃљрЃЌрЃљрЃБрЃарЃўрЃА рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ
    
    рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
    - title (str): рЃерЃћрЃАрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃћрЃџрЃў рЃАрЃљрЃЌрЃљрЃБрЃарЃў
    
    Returns:
    - tuple: (bool, str) - (рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃБрЃџрЃў/рЃгрЃљрЃарЃБрЃЏрЃљрЃбрЃћрЃЉрЃћрЃџрЃў, рЃерЃћрЃфрЃЊрЃЮрЃЏрЃўрЃА рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃљ)
    """
    if not title or title.strip() == "":
        return False, "рЃАрЃљрЃЌрЃљрЃБрЃарЃў рЃљрЃа рЃерЃћрЃўрЃФрЃџрЃћрЃЉрЃљ рЃўрЃДрЃЮрЃА рЃфрЃљрЃарЃўрЃћрЃџрЃў!"
    
    if len(title.strip()) < 2:
        return False, "рЃАрЃљрЃЌрЃљрЃБрЃарЃў рЃБрЃюрЃЊрЃљ рЃерЃћрЃўрЃфрЃљрЃЋрЃЊрЃћрЃА рЃЏрЃўрЃюрЃўрЃЏрЃБрЃЏ 2 рЃАрЃўрЃЏрЃЉрЃЮрЃџрЃЮрЃА!"
    
    return True, ""


def validate_author(author):
    """
    рЃљрЃЋрЃбрЃЮрЃарЃўрЃА рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ
    
    рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
    - author (str): рЃерЃћрЃАрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃћрЃџрЃў рЃљрЃЋрЃбрЃЮрЃарЃў
    
    Returns:
    - tuple: (bool, str) - (рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃБрЃџрЃў/рЃгрЃљрЃарЃБрЃЏрЃљрЃбрЃћрЃЉрЃћрЃџрЃў, рЃерЃћрЃфрЃЊрЃЮрЃЏрЃўрЃА рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃљ)
    """
    if not author or author.strip() == "":
        return False, "рЃљрЃЋрЃбрЃЮрЃарЃў рЃљрЃа рЃерЃћрЃўрЃФрЃџрЃћрЃЉрЃљ рЃўрЃДрЃЮрЃА рЃфрЃљрЃарЃўрЃћрЃџрЃў!"
    
    if len(author.strip()) < 2:
        return False, "рЃљрЃЋрЃбрЃЮрЃарЃў рЃБрЃюрЃЊрЃљ рЃерЃћрЃўрЃфрЃљрЃЋрЃЊрЃћрЃА рЃЏрЃўрЃюрЃўрЃЏрЃБрЃЏ 2 рЃАрЃўрЃЏрЃЉрЃЮрЃџрЃЮрЃА!"
    
    return True, ""


def validate_year(year_str):
    """
    рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃџрЃўрЃА рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ
    
    рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
    - year_str (str): рЃерЃћрЃАрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃћрЃџрЃў рЃгрЃћрЃџрЃў (рЃАрЃбрЃарЃўрЃюрЃњрЃўрЃА рЃАрЃљрЃ«рЃўрЃЌ)
    
    Returns:
    - tuple: (bool, str/int) - (рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃБрЃџрЃў/рЃгрЃљрЃарЃБрЃЏрЃљрЃбрЃћрЃЉрЃћрЃџрЃў, рЃерЃћрЃфрЃЊрЃЮрЃЏрЃўрЃА рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃљ рЃљрЃю рЃгрЃћрЃџрЃў)
    """
    try:
        year = int(year_str)
        
        if year < 1000:
            return False, "рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃћрЃџрЃў рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА рЃЏрЃўрЃюрЃўрЃЏрЃБрЃЏ 1000!"
        
        if year > 2025:
            return False, "рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃћрЃџрЃў рЃљрЃа рЃерЃћрЃўрЃФрЃџрЃћрЃЉрЃљ рЃўрЃДрЃЮрЃА рЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃерЃў!"
        
        return True, year
        
    except ValueError:
        return False, "рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃћрЃџрЃў рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА рЃарЃўрЃфрЃ«рЃЋрЃў!"


# user_interface.py - рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў

def print_menu():
    """
    рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃЏрЃћрЃюрЃўрЃБрЃА рЃЊрЃљрЃЉрЃћрЃГрЃЊрЃЋрЃљ
    """
    print("\n" + "=" * 80)
    print("­ЪЊџ рЃгрЃўрЃњрЃюрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ".center(80))
    print("=" * 80)
    print("\n1. рЃљрЃ«рЃљрЃџрЃў рЃгрЃўрЃњрЃюрЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ")
    print("2. рЃгрЃўрЃњрЃюрЃўрЃА рЃгрЃљрЃерЃџрЃљ")
    print("3. рЃгрЃўрЃњрЃюрЃўрЃА рЃФрЃўрЃћрЃЉрЃљ рЃАрЃљрЃЌрЃљрЃБрЃарЃўрЃЌ")
    print("4. рЃгрЃўрЃњрЃюрЃўрЃА рЃФрЃўрЃћрЃЉрЃљ рЃљрЃЋрЃбрЃЮрЃарЃўрЃЌ")
    print("5. рЃгрЃўрЃњрЃюрЃўрЃА рЃФрЃўрЃћрЃЉрЃљ рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃџрЃўрЃЌ")
    print("6. рЃДрЃЋрЃћрЃџрЃљ рЃгрЃўрЃњрЃюрЃўрЃА рЃюрЃљрЃ«рЃЋрЃљ")
    print("0. рЃњрЃљрЃАрЃЋрЃџрЃљ")
    print("-" * 80)


def add_book_interface(manager):
    """
    рЃгрЃўрЃњрЃюрЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў
    
    рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
    - manager (BookManager): BookManager-рЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў
    """
    print("\nРъЋ рЃљрЃ«рЃљрЃџрЃў рЃгрЃўрЃњрЃюрЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ")
    print("-" * 40)
    
    # рЃАрЃљрЃЌрЃљрЃБрЃарЃўрЃА рЃерЃћрЃДрЃЋрЃљрЃюрЃљ рЃЊрЃљ рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ
    while True:
        title = input("рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃгрЃўрЃњрЃюрЃўрЃА рЃАрЃљрЃЌрЃљрЃБрЃарЃў: ").strip()
        is_valid, error_msg = validate_title(title)
        if is_valid:
            break
        else:
            print(f"РЮї {error_msg}")
    
    # рЃљрЃЋрЃбрЃЮрЃарЃўрЃА рЃерЃћрЃДрЃЋрЃљрЃюрЃљ рЃЊрЃљ рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ
    while True:
        author = input("рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃљрЃЋрЃбрЃЮрЃарЃў: ").strip()
        is_valid, error_msg = validate_author(author)
        if is_valid:
            break
        else:
            print(f"РЮї {error_msg}")
    
    # рЃгрЃџрЃўрЃА рЃерЃћрЃДрЃЋрЃљрЃюрЃљ рЃЊрЃљ рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ
    while True:
        year_input = input("рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃћрЃџрЃў: ").strip()
        is_valid, result = validate_year(year_input)
        if is_valid:
            year = result
            break
        else:
            print(f"РЮї {result}")
    
    # рЃгрЃўрЃњрЃюрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ рЃЊрЃљ рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ
    book = Book(title, author, year)
    manager.add_book(book)


def remove_book_interface(manager):
    """
    рЃгрЃўрЃњрЃюрЃўрЃА рЃгрЃљрЃерЃџрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў
    
    рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
    - manager (BookManager): BookManager-рЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў
    """
    print("\nРъќ рЃгрЃўрЃњрЃюрЃўрЃА рЃгрЃљрЃерЃџрЃљ")
    print("-" * 40)
    
    if not manager.books:
        print("­ЪЊџ рЃЉрЃўрЃЉрЃџрЃўрЃЮрЃЌрЃћрЃЎрЃљ рЃфрЃљрЃарЃўрЃћрЃџрЃўрЃљ!")
        return
    
    title = input("рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃгрЃљрЃАрЃљрЃерЃџрЃћрЃџрЃў рЃгрЃўрЃњрЃюрЃўрЃА рЃАрЃљрЃЌрЃљрЃБрЃарЃў: ").strip()
    manager.remove_book(title)


def search_by_title_interface(manager):
    """
    рЃАрЃљрЃЌрЃљрЃБрЃарЃўрЃЌ рЃФрЃўрЃћрЃЉрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў
    
    рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
    - manager (BookManager): BookManager-рЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў
    """
    print("\n­ЪћЇ рЃФрЃўрЃћрЃЉрЃљ рЃАрЃљрЃЌрЃљрЃБрЃарЃўрЃЌ")
    print("-" * 40)
    
    title = input("рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃАрЃљрЃЌрЃљрЃБрЃарЃў: ").strip()
    results = manager.search_by_title(title)
    
    display_search_results(results, f"рЃАрЃљрЃЌрЃљрЃБрЃарЃў '{title}'")


def search_by_author_interface(manager):
    """
    рЃљрЃЋрЃбрЃЮрЃарЃўрЃЌ рЃФрЃўрЃћрЃЉрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў
    
    рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
    - manager (BookManager): BookManager-рЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў
    """
    print("\n­ЪћЇ рЃФрЃўрЃћрЃЉрЃљ рЃљрЃЋрЃбрЃЮрЃарЃўрЃЌ")
    print("-" * 40)
    
    author = input("рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃљрЃЋрЃбрЃЮрЃарЃў: ").strip()
    results = manager.search_by_author(author)
    
    display_search_results(results, f"рЃљрЃЋрЃбрЃЮрЃарЃў '{author}'")


def search_by_year_interface(manager):
    """
    рЃгрЃџрЃўрЃЌ рЃФрЃўрЃћрЃЉрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў
    
    рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
    - manager (BookManager): BookManager-рЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў
    """
    print("\n­ЪћЇ рЃФрЃўрЃћрЃЉрЃљ рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃџрЃўрЃЌ")
    print("-" * 40)
    
    while True:
        year_input = input("рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃњрЃљрЃЏрЃЮрЃфрЃћрЃЏрЃўрЃА рЃгрЃћрЃџрЃў: ").strip()
        is_valid, result = validate_year(year_input)
        if is_valid:
            year = result
            break
        else:
            print(f"РЮї {result}")
    
    results = manager.search_by_year(year)
    display_search_results(results, f"рЃгрЃћрЃџрЃў {year}")


def display_search_results(results, search_criteria):
    """
    рЃФрЃўрЃћрЃЉрЃўрЃА рЃерЃћрЃЊрЃћрЃњрЃћрЃЉрЃўрЃА рЃЕрЃЋрЃћрЃюрЃћрЃЉрЃљ
    
    рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
    - results (list): рЃюрЃљрЃърЃЮрЃЋрЃюрЃў рЃгрЃўрЃњрЃюрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ
    - search_criteria (str): рЃФрЃўрЃћрЃЉрЃўрЃА рЃЎрЃарЃўрЃбрЃћрЃарЃўрЃБрЃЏрЃў
    """
    if not results:
        print(f"\nРЮї рЃгрЃўрЃњрЃюрЃў рЃљрЃа рЃЏрЃЮрЃўрЃФрЃћрЃЉрЃюрЃљ рЃЎрЃарЃўрЃбрЃћрЃарЃўрЃБрЃЏрЃўрЃЌ: {search_criteria}")
        return
    
    print(f"\nРюЊ рЃЏрЃЮрЃўрЃФрЃћрЃЉрЃюрЃљ {len(results)} рЃгрЃўрЃњрЃюрЃў:")
    print("-" * 80)
    for i, book in enumerate(results, 1):
        print(f"{i}. {book}")
    print("-" * 80)


# main.py - рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃљ

def main():
    """
    рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ - рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃўрЃА рЃерЃћрЃАрЃЋрЃџрЃўрЃА рЃгрЃћрЃарЃбрЃўрЃџрЃў
    """
    print("=" * 80)
    print("­ЪЊџ рЃгрЃўрЃњрЃюрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ рЃЕрЃљрЃўрЃбрЃЋрЃўрЃарЃЌрЃљ".center(80))
    print("=" * 80)
    
    # BookManager-рЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ (рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃўрЃбрЃЋрЃўрЃарЃЌрЃћрЃЉрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў)
    manager = BookManager()
    
    # рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃфрЃўрЃЎрЃџрЃў
    while True:
        print_menu()
        
        choice = input("\nрЃљрЃўрЃарЃЕрЃўрЃћрЃЌ рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃљ (0-6): ").strip()
        
        if choice == "1":
            add_book_interface(manager)
            
        elif choice == "2":
            remove_book_interface(manager)
            
        elif choice == "3":
            search_by_title_interface(manager)
            
        elif choice == "4":
            search_by_author_interface(manager)
            
        elif choice == "5":
            search_by_year_interface(manager)
            
        elif choice == "6":
            manager.display_all_books()
            
        elif choice == "0":
            print("\n" + "=" * 80)
            print("­ЪЉІ рЃЏрЃљрЃЊрЃџрЃЮрЃЉрЃљ рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА!".center(80))
            print(f"­ЪњЙ рЃДрЃЋрЃћрЃџрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃў рЃерЃћрЃюрЃљрЃ«рЃБрЃџрЃўрЃљ рЃцрЃљрЃўрЃџрЃерЃў: {manager.filename}".center(80))
            print("=" * 80)
            break
            
        else:
            print("\nРЮї рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃў рЃљрЃарЃЕрЃћрЃЋрЃљрЃюрЃў! рЃњрЃЌрЃ«рЃЮрЃЋрЃЌ рЃљрЃўрЃарЃЕрЃўрЃЮрЃЌ 0-рЃЊрЃљрЃю 6-рЃЏрЃЊрЃћ.")
        
        # рЃърЃљрЃБрЃќрЃљ рЃерЃћрЃЏрЃЊрЃћрЃњрЃў рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃўрЃА рЃгрЃўрЃю
        input("\nрЃЊрЃљрЃљрЃГрЃўрЃарЃћрЃЌ Enter-рЃА рЃњрЃљрЃАрЃљрЃњрЃарЃФрЃћрЃџрЃћрЃЉрЃџрЃљрЃЊ...")


# рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃўрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃљ
if __name__ == "__main__":
    main()