import math

def calculator():
    """
    рЃЎрЃљрЃџрЃЎрЃБрЃџрЃљрЃбрЃЮрЃарЃў рЃФрЃџрЃўрЃћрЃарЃў рЃерЃћрЃфрЃЊрЃЮрЃЏрЃћрЃЉрЃўрЃА рЃЊрЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃўрЃЌ
    """
    print("=" * 60)
    print("рЃЎрЃљрЃџрЃЎрЃБрЃџрЃљрЃбрЃЮрЃарЃў".center(60))
    print("=" * 60)
    
    while True:
        print("\n­ЪЊІ рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃў рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃў:")
        print("1. + (рЃерЃћрЃЎрЃарЃћрЃЉрЃљ)")
        print("2. - (рЃњрЃљрЃЏрЃЮрЃЎрЃџрЃћрЃЉрЃљ)")
        print("3. * (рЃњрЃљрЃЏрЃарЃљрЃЋрЃџрЃћрЃЉрЃљ)")
        print("4. / (рЃњрЃљрЃДрЃЮрЃцрЃљ)")
        print("5. ** (рЃ«рЃљрЃарЃўрЃАрЃ«рЃерЃў рЃљрЃДрЃЋрЃљрЃюрЃљ)")
        print("6. Рѕџ (рЃцрЃћрЃАрЃЋрЃўрЃА рЃљрЃЏрЃЮрЃдрЃћрЃЉрЃљ)")
        print("7.  рЃњрЃљрЃАрЃЋрЃџрЃљ")
        print("-" * 60)
        
        choice = input("\nРъц рЃљрЃарЃЕрЃўрЃћ рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃљ (1-7): ").strip()
        
        if not choice:
            print("рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: рЃљрЃарЃљрЃцрЃћрЃарЃў рЃљрЃа рЃерЃћрЃњрЃўрЃДрЃЋрЃљрЃюрЃўрЃљ!  рЃАрЃфрЃљрЃЊрЃћ рЃ«рЃћрЃџрЃљрЃ«рЃџрЃљ.")
            continue
        
        if choice == '7' or choice. lower() in ['exit', 'рЃњрЃљрЃАрЃЋрЃџрЃљ', 'quit', 'q']:
            print("\n рЃЏрЃљрЃЊрЃџрЃЮрЃЉрЃљ рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА!  ")
            break
        
        if choice not in ['1', '2', '3', '4', '5', '6']:
            print(f"рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: '{choice}' рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃў рЃљрЃарЃЕрЃћрЃЋрЃљрЃюрЃўрЃљ!")
            print("рЃњрЃЌрЃ«рЃЮрЃЋрЃЌ рЃљрЃўрЃарЃЕрЃўрЃЮрЃЌ рЃарЃўрЃфрЃ«рЃЋрЃў 1-рЃЊрЃљрЃю 7-рЃЏрЃЊрЃћ.")
            continue
        
        try:
            if choice == '6':
                num_input = input("Ръц рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃарЃўрЃфрЃ«рЃЋрЃў: ").strip()
                

                if not num_input:
                    print("рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: рЃљрЃарЃљрЃцрЃћрЃарЃў рЃљрЃа рЃерЃћрЃњрЃўрЃДрЃЋрЃљрЃюрЃўрЃљ!")
                    continue
                
                try:
                    num = float(num_input)
                except ValueError:
                    print(f"рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: '{num_input}' рЃљрЃа рЃљрЃарЃўрЃА рЃарЃўрЃфрЃ«рЃЋрЃў!")
                    print(" рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ: 16, 25, 100")
                    continue
                
                if num < 0:
                    print(f"рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: рЃБрЃљрЃарЃДрЃЮрЃцрЃўрЃЌрЃў рЃарЃўрЃфрЃ«рЃЋрЃўрЃА ({num}) рЃцрЃћрЃАрЃЋрЃў рЃљрЃа рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА!")
                    print("рЃњрЃЌрЃ«рЃЮрЃЋрЃЌ рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃЮрЃЌ рЃЊрЃљрЃЊрЃћрЃЉрЃўрЃЌрЃў рЃарЃўрЃфрЃ«рЃЋрЃў.")
                    continue
                
                result = math.sqrt(num)
                print(f"\n Рѕџ{num} = {result}")
            
            elif choice in ['1', '2', '3', '4', '5']:
                num1_input = input("Ръц рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃърЃўрЃарЃЋрЃћрЃџрЃў рЃарЃўрЃфрЃ«рЃЋрЃў: ").strip()
                
                if not num1_input:
                    print("рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: рЃърЃўрЃарЃЋрЃћрЃџрЃў рЃарЃўрЃфрЃ«рЃЋрЃў рЃљрЃа рЃљрЃарЃўрЃА рЃерЃћрЃДрЃЋрЃљрЃюрЃўрЃџрЃў!")
                    continue
                
                try:
                    num1 = float(num1_input)
                except ValueError:
                    print(f"рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: '{num1_input}' рЃљрЃа рЃљрЃарЃўрЃА рЃарЃўрЃфрЃ«рЃЋрЃў!")
                    print(" рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ: 5, 10. 5, -3")
                    continue
                
                num2_input = input("Ръц рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃЏрЃћрЃЮрЃарЃћ рЃарЃўрЃфрЃ«рЃЋрЃў: ").strip()
                
                if not num2_input:
                    print("рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: рЃЏрЃћрЃЮрЃарЃћ рЃарЃўрЃфрЃ«рЃЋрЃў рЃљрЃа рЃљрЃарЃўрЃА рЃерЃћрЃДрЃЋрЃљрЃюрЃўрЃџрЃў!")
                    continue
                
                try:
                    num2 = float(num2_input)
                except ValueError:
                    print(f"рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: '{num2_input}' рЃљрЃа рЃљрЃарЃўрЃА рЃарЃўрЃфрЃ«рЃЋрЃў!")
                    print("рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ: 5, 10.5, -3")
                    continue
                
                if choice == '1':
                    result = num1 + num2
                    print(f"\n{num1} + {num2} = {result}")
                
                elif choice == '2':
                    result = num1 - num2
                    print(f"\n{num1} - {num2} = {result}")
                
                elif choice == '3':
                    result = num1 * num2
                    print(f"\n{num1} ├Ќ {num2} = {result}")
                
                elif choice == '4':
                    if num2 == 0:
                        print(f"рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: {num1} / 0 - рЃюрЃБрЃџрЃќрЃћ рЃњрЃљрЃДрЃЮрЃцрЃљ рЃерЃћрЃБрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ!")
                        print(" рЃЏрЃћрЃЮрЃарЃћ рЃарЃўрЃфрЃ«рЃЋрЃў рЃљрЃа рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА рЃюрЃБрЃџрЃў.")
                        continue
                    result = num1 / num2
                    print(f"\n {num1} ├и {num2} = {result}")
                
                elif choice == '5':
                    if abs(num2) > 1000:
                        print(f"рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: рЃ«рЃљрЃарЃўрЃАрЃ«рЃў ({num2}) рЃФрЃљрЃџрЃўрЃљрЃю рЃЊрЃўрЃЊрЃўрЃљ!")
                        print(" рЃњрЃЌрЃ«рЃЮрЃЋрЃЌ рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃЮрЃЌ рЃБрЃцрЃарЃЮ рЃърЃљрЃбрЃљрЃарЃљ рЃарЃўрЃфрЃ«рЃЋрЃў.")
                        continue
                    if num1 == 0 and num2 == 0:
                        print("рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: 0^0 рЃЏрЃљрЃЌрЃћрЃЏрЃљрЃбрЃўрЃЎрЃБрЃарЃљрЃЊ рЃњрЃљрЃюрЃБрЃАрЃљрЃќрЃдрЃЋрЃарЃћрЃџрЃўрЃљ!")
                        continue
                    
                    if num1 == 0 and num2 < 0:
                        print("рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: 0-рЃА рЃБрЃљрЃарЃДрЃЮрЃцрЃўрЃЌ рЃ«рЃљрЃарЃўрЃАрЃ«рЃерЃў рЃљрЃДрЃЋрЃљрЃюрЃљ рЃерЃћрЃБрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ!")
                        continue
                    
                    try:
                        result = num1 ** num2
                        if abs(result) > 1e100:
                            print(f"рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: рЃерЃћрЃЊрЃћрЃњрЃў ({result:. 2e}) рЃФрЃљрЃџрЃўрЃљрЃю рЃЊрЃўрЃЊрЃўрЃљ!")
                            continue
                        print(f"\n {num1}^{num2} = {result}")
                    except OverflowError:
                        print("рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: рЃерЃћрЃЊрЃћрЃњрЃў рЃФрЃљрЃџрЃўрЃљрЃю рЃЊрЃўрЃЊрЃўрЃљ рЃњрЃљрЃЏрЃЮрЃАрЃљрЃЌрЃЋрЃџрЃћрЃџрЃљрЃЊ!")
                        continue
        
        except KeyboardInterrupt:
            print("\n\n рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃљ рЃерЃћрЃгрЃДрЃЋрЃћрЃбрЃўрЃџрЃўрЃљ рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃЏрЃўрЃћрЃа.")
            break
        except MemoryError:
            print("рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: рЃљрЃарЃљрЃАрЃљрЃЎрЃЏрЃљрЃарЃўрЃАрЃў рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃљ!")
        except Exception as e:
            print(f"рЃЏрЃЮрЃБрЃџрЃЮрЃЊрЃюрЃћрЃџрЃў рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: {e}")
            print("рЃњрЃЌрЃ«рЃЮрЃЋрЃЌ рЃАрЃфрЃљрЃЊрЃЮрЃЌ рЃ«рЃћрЃџрЃљрЃ«рЃџрЃљ.")
        
        print("\n" + "=" * 60)


if __name__ == "__main__":
    try:
        calculator()
    except KeyboardInterrupt:
        print("\n\nрЃърЃарЃЮрЃњрЃарЃљрЃЏрЃљ рЃЊрЃљрЃ«рЃБрЃарЃБрЃџрЃўрЃљ.")
    except Exception as e:
        print(f"\nрЃЎрЃарЃўрЃбрЃўрЃЎрЃБрЃџрЃў рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: {e}")